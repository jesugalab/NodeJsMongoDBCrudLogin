<% include partials/_header %>

<div class="container-fluid px-2">
  <div class="col-lg-8 col-md-10 col-sm-12 mx-auto">
    <h2 class="text-center mb-4">Lista de Usuarios</h2>
    <div class="table-responsive">
      <table class="table table-bordered table-hover text-center w-100">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Apellidos</th>
            <th>Correo</th>
            <th>Rol</th>
            <% if (user.rol.toLowerCase() == "admin") { %> 
              <th>Acciones</th>
            <% } %>
          </tr>
        </thead>
        <tbody>
          <% if (usuarios.length > 0) { %>
            <% usuarios.forEach(usuario => { %>
              <tr>
                <td><%= usuario.nombre %></td>
                <td><%= usuario.apellidos %></td>
                <td><%= usuario.email %></td>
                <td><%= usuario.rol %></td>
                <% if (user.rol.toLowerCase() == "admin") { %>
                  <td>
                    <div class="d-flex justify-content-center">
                      <a href="/usuarios/edit/<%= usuario._id %>" class="btn btn-info btn-sm me-2">Editar</a>
                      <a href="/usuarios/delete/<%= usuario._id %>" class="btn btn-danger btn-sm">Borrar</a>
                    </div>
                  </td>
                <% } %>
              </tr>
            <% }) %>
          <% } else { %>
            <tr>
              <td colspan="5" class="text-center">No hay usuarios registrados</td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<% include partials/_footer %>
